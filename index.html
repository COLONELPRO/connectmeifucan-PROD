<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WTP Study ‚Äì SmartPlug (GEM)</title>
  <style>
    :root{
      --bg:#f7f7f7;--text:#111827;--muted:#6b7280;--brand:#009E4F;
      --card:#fff;--shadow:0 10px 30px rgba(0,0,0,.06);--radius:18px
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    header{background:#fff;box-shadow:var(--shadow);position:sticky;top:0;z-index:10}
    .head{max-width:1100px;margin:0 auto;padding:12px 20px;display:flex;align-items:center;gap:12px}
    .gem{height:80px}
    .brand{margin-left:auto;display:flex;align-items:center;gap:10px;white-space:nowrap}
    .dot{width:10px;height:10px;background:var(--brand);border-radius:50%}
    .container{max-width:1100px;margin:28px auto;padding:0 20px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px}
    h1{margin:.2em 0 .4em 0;font-size:clamp(22px,4vw,34px)}
    h2{font-size:18px;margin:0 0 6px 0}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:22px;align-items:start}
    .section{padding:18px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px}
    .bullet{margin:.2em 0}
    .price{font-size:22px;font-weight:800}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .value{font-variant-numeric:tabular-nums;font-weight:800}
    input[type=range]{width:100%}
    .btn{appearance:none;border:0;border-radius:12px;padding:13px 18px;font-weight:700;cursor:pointer;box-shadow:var(--shadow)}
    .btn-primary{background:var(--brand);color:#fff}
    .hint{font-size:12px;color:#6b7280}
    .ok{color:#059669}.err{color:#b91c1c}
    .product{background:linear-gradient(180deg,#fff,#f3f4f6);border-radius:16px;box-shadow:var(--shadow);padding:14px;display:flex;align-items:center;justify-content:center}
    .product img{max-width:100%;height:auto;border-radius:12px;display:block;margin-bottom:12px}
    .cap{font-size:12px;color:#6b7280;text-align:center;margin-top:6px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="head">
      <img class="gem" src="logo_GEM.png" alt="GEM ‚Äì Grenoble √âcole de Management" />
      <div class="brand"><div class="dot"></div><strong id="brandTitle">WTP Study ‚Äì SmartPlug</strong></div>
    </div>
  </header>

  <div class="container">
    <div class="card">
      <div class="grid">
        <div>
          <h1 id="title">√âtude rapide sur la disposition √† payer (WTP)</h1>
          <p class="muted" id="intro">
            <strong>Produit affich√© :</strong> 49 ‚Ç¨ TTC.<br/>
            Dans le cadre d'une √©tude rapide sur la disposition √† payer (WTP) et les comportements d'achat,
            merci d'indiquer votre prix pour la <strong>version en plastique r√©utilisable √† caract√©ristiques √©quivalentes</strong>.
          </p>

          <div class="grid" style="grid-template-columns:1fr 1fr;gap:18px;margin-top:12px">
            <div class="section">
              <h2>Produit standard</h2>
              <p class="bullet">Mat√©riau : <strong>Plastique conventionnel</strong> (non recycl√©)</p>
              <p class="price">Prix affich√© : <strong>49 ‚Ç¨ TTC</strong></p>
            </div>
            <div class="section">
              <h2>Alternative durable</h2>
              <p class="bullet">Mat√©riau : <strong>Plastique r√©utilisable</strong> √† caract√©ristiques √©quivalentes</p>
              <p class="bullet">Fonctionnalit√©s : <strong>identiques</strong> au produit standard</p>
            </div>
          </div>

          <div class="section" style="margin-top:16px">
            <h2>üß† Question</h2>
            <p>Quel prix seriez-vous pr√™t(e) √† payer pour la version en plastique r√©utilisable, tout en conservant les m√™mes fonctionnalit√©s ?</p>
            <div class="row" style="justify-content:space-between;margin-top:6px">
              <span class="muted">Plus bas</span><strong class="value" id="wtpValue">49 ‚Ç¨</strong><span class="muted">Plus √©lev√©</span>
            </div>
            <input type="range" min="29" max="69" step="1" value="49" id="wtp" />
            <p class="hint">Curseur ¬±20 ‚Ç¨ autour de 49 ‚Ç¨ (29‚Äì69 ‚Ç¨).</p>

            <div class="row" style="margin-top:10px">
              <label for="email" class="muted">Email (facultatif) :</label>
              <input id="email" type="email" placeholder="prenom.nom@exemple.com" style="flex:1;min-width:240px;padding:12px;border:1px solid #d1d5db;border-radius:10px"/>
            </div>

            <div class="row" style="margin-top:12px">
              <button class="btn btn-primary" id="submit">Valider</button>
              <span id="status" class="hint"></span>
            </div>
          </div>
        </div>

        <aside>
          <div class="product">
            <img src="Prise connectee.jpg" alt="Prise connect√©e ‚Äì visuel produit" loading="lazy"/>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    // ================= CONFIG =====================
    const ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbxQI1wTslIozYdqNPl3E6Rw7SpvKtCeNM9wCm-LYHqrbnqkZdpnoiJV-PUB9dlsVOwlow/exec";
    // ==============================================

    const isFr = (navigator.language || navigator.userLanguage || "en").toLowerCase().startsWith("fr");
    const fmt = (v) => new Intl.NumberFormat(isFr ? "fr-FR" : "en-GB", {style:'currency',currency:'EUR'}).format(Number(v));

    const slider = document.getElementById('wtp');
    const out = document.getElementById('wtpValue');
    slider.addEventListener('input', () => { out.textContent = fmt(slider.value); });
    out.textContent = fmt(slider.value);

    const status = document.getElementById('status');
    document.getElementById('submit').addEventListener('click', async () => {
      const payload = {
        timestamp: new Date().toISOString(),
        language: isFr ? "fr" : "en",
        product_name: isFr ? "SmartPlug ‚Äì version r√©utilisable (WTP)" : "SmartPlug ‚Äì reusable version (WTP)",
        standard_price: 49,
        wtp_price: Number(slider.value),
        email: (document.getElementById('email').value || "").trim(),
        browser_language: navigator.language || navigator.userLanguage || "unknown"
      };
      try {
        status.textContent = isFr ? "Envoi..." : "Sending...";
        const form = new URLSearchParams();
        form.set("payload", JSON.stringify(payload));
        await fetch(ENDPOINT_URL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
          body: form.toString(),
          mode: "no-cors"
        });
        status.textContent = isFr ? "OK ‚úî" : "OK ‚úî";
        status.className = "hint ok";
        setTimeout(() => { window.location.href = "thank_you.html"; }, 250);
      } catch (e) {
        status.textContent = (isFr ? "√âchec" : "Failed") + " (" + e.message + ")";
        status.className = "hint err";
      }
    });
  </script>
</body>
</html>
